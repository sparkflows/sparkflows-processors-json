{
  "id": "7",
  "name": "EmailNotification",
  "description": "This node sends notification to given email address with given content",
  "type": "Node",
  "nodeClass": "fire.nodes.util.NodeEmailNotification",
  "fields": [
    {"name": "Name", "value":"", "required":true, "widget": "textfield", "title": "Task Name", "description": "Unique name of the task in Airflow DAG"},
    {"name": "ClusterId", "value":"", "required":false, "widget": "textfield", "title": "Cluster ID", "description": "If Cluster ID is empty, the step tries to pick the cluster ID from previous create EMR node(task)" },
    {"name": "ActionOnFailure","value":"CONTINUE", "required":true, "widget": "array", "optionsArray": ["CANCEL_AND_WAIT", "CONTINUE", "TERMINATE_JOB_FLOW", "TERMINATE_CLUSTER"], "title": "Action On Failure", "description": "Action to be taken on Failure" },
    {"name": "SparkConf", "value":"", "required":false, "widget": "textfield", "title": "Spark Conf", "description": "Add spark conf values in comma separated as key=value" },
    {"name": "aws_conn_id", "value":"", "required":false, "widget": "textfield", "title": "AWS Connection ID", "description": "AWS Connection ID" },
    {"name": "deploy-mode", "value":"cluster", "widget": "array", "optionsArray": ["cluster","client"], "title": "Deploy Mode", "description": "Whether to deploy your driver on the worker nodes (cluster) or locally as an external client (client)", "required": true},
    {"name": "trigger_rule", "value":"all_success", "required":true, "widget": "array", "optionsArray": ["all_success","all_failed","all_done","all_skipped","one_failed","one_success","none_failed","none_failed_min_one_success","none_skipped","always"], "title": "Trigger Rule", "description": "Trigger Rule to be used" },
    {"name": "nodeconfiguration", "value":"", "widget": "tab", "title": "NodeConfiguration"},
    {"name":"emailAddress", "display": true, "value":"", "widget": "textfield", "title": "Email Address", "description": "Email Address (Add multiple email as comma separated)" ,"required":"true"},
    {"name":"subject", "display": true, "value":"", "widget": "textfield", "title": "Subject", "description": "Subject" ,"required":"true"},
    {"name":"content", "display": true, "value":"", "widget": "textarea", "title": "Content", "description": "Content" ,"required":"true"}
  ]
}

start-details:

h2: Email Notification Configuration Details

This node allows you to set up an email notification within a pipeline.

* Task Name: Provide a unique name for this task to track it in the Airflow DAG.
* Email Address: Specify the email address where notifications should be sent.
* Subject: Define the subject of the email to describe the purpose or content.
* Content: Add the body of the email message. You can also reference dynamic parameters.
* ClusterId: The unique identifier for the cluster associated with this task. If the preceding node is 'Create EMR JobFlow,' the ClusterId will be automatically set to the newly created cluster ID from the 'Create EMR JobFlow' step, unless specified otherwise. If not, the ClusterId must be provided explicitly.

The notification can be triggered based on specific events or statuses by using the Trigger Rule and Action on Failure settings.

end-details:

start-examples:

h2: Email Notification Node Configuration Examples

h4: Example 1 - Error Notification with Detailed Log

* Task Name: 'ErrorNotification'
* ClusterId: 'j-1234567890ABCDE'
* Email Address: 'admin@example.com'
* Subject: 'Error in Data Processing Workflow'
* Content: 'An error occurred during the data processing workflow. Please review the attached logs or visit the monitoring dashboard for further details.'
* Action on Failure: 'CONTINUE'
* Trigger Rule: 'one_failed'

This example sends an error notification to an admin if any task in the workflow fails, providing a quick alert to address the issue.

h4: Example 2 - Completion Notification for Stakeholders

* Task Name: 'DataPipelineCompletionNotification'
* ClusterId: 'j-1234567890ABCDE'
* Email Address: 'team@example.com, manager@example.com'
* Subject: 'Data Pipeline Execution Completed Successfully'
* Content: 'The scheduled data pipeline has successfully completed. Data is now available for analysis in the database. No action is required at this time.'
* Action on Failure: 'CONTINUE'
* Trigger Rule: 'all_success'

This setup sends a completion email to the team and the manager when all tasks in the data pipeline complete successfully. The workflow will continue even if the email fails to send.

end-examples: