{
  "name": "emr_sns",
  "uuid": "4f0f6b90-cb59-43d3-a53f-d7ffafdc071f",
  "category": "",
  "description": "",
  "parameters": "",
  "nodes": [
    {
      "id": "1",
      "path": "/03-EMR/",
      "name": "Add Step EMR JobFlow",
      "description": "This node adds steps to an existing EMR job flow and executes the arguments as one command using command-runner.jar",
      "details": "<h2>Add step to EMR cluster</h2>\n<br>\nThis node adds steps to an existing EMR job flow and executes the arguments as one command using command-runner.jar.<br>\n<br>\nAddStepEMRJob uses command-runner.jar by default to run commands as a step in EMR.<br>\n<br>\nHere added example for running the spark-submit command in AddStepEMRJobFlow<br>\n<br>\nArguments: bash,-c,\"spark-submit --master yarn --deploy-mode client --class com.fire.SparkPi s3://sparkflows/fire/fire-spark-test-1.0-jar-with-dependencies.jar {arg}\"<br>",
      "examples": "<h2>Add Step EMR JobFlow Examples</h2>\n<br>\n<h4> Example of Adding a Step to EMR</h4>\n<br>\n{<br>\n\"Name\": \"Step1\",<br>\n\"StepName\": \"DataProcessing\",<br>\n\"ClusterId\": \"j-1234567890ABCDE\",<br>\n\"ActionOnFailure\": \"CONTINUE\",<br>\n\"Jar\": \"command-runner.jar\",<br>\n\"Jars\": \"my-jar1.jar,my-jar2.jar\",<br>\n\"Arguments\": \"arg1,arg2,arg3\",<br>\n\"aws_conn_id\": \"my-aws-conn-id\",<br>\n\"trigger_rule\": \"all_success\"<br>\n}<br>\n<br>\n<h4> Explanation</h4>\n<br>\n<ul>\n<li> This example demonstrates how to add a step to an existing EMR cluster using the specified fields. The Name and StepName are required, along with the Arguments and Jar fields. The ActionOnFailure specifies what to do if the step fails.</li>\n</ul>\n<h4> Example of XCOM Push</h4>\n<br>\nTo push a variable to XCOM within the EMR step, you could include logic in the Python operator to handle the processing of the step's output.<br>\n<br>\n<h4> Usage</h4>\n<ul>\n<li> Task ID: \"add_step_emr_jobflow_task\"</li>\n</ul>",
      "type": "addStep",
      "nodeClass": "fire.pipelineNodes.addStep",
      "x": "139px",
      "y": "284px",
      "fields": [
        {
          "name": "Name",
          "value": "sns_emr",
          "widget": "textfield",
          "title": "Task Name",
          "description": "Unique name of the task in Airflow DAG",
          "required": true,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "StepName",
          "value": "sns_emr",
          "widget": "textfield",
          "title": "Step Name",
          "description": "Name of emr step",
          "required": true,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "ClusterId",
          "value": "j-1B0NE1QTY0GD1",
          "widget": "textfield",
          "title": "Cluster ID",
          "description": "If Cluster ID is empty, the step tries to pick the cluster ID from previous create EMR node(task)",
          "required": false,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "ActionOnFailure",
          "value": "CONTINUE",
          "widget": "array",
          "title": "Action On Failure",
          "description": "Action to be taken on Failure",
          "optionsArray": [
            "CANCEL_AND_WAIT",
            "CONTINUE",
            "TERMINATE_JOB_FLOW",
            "TERMINATE_CLUSTER"
          ],
          "required": true,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "Jar",
          "value": "command-runner.jar",
          "widget": "textfield",
          "title": "JAR",
          "description": "JAR",
          "required": true,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "Jars",
          "value": "",
          "widget": "textfield",
          "title": "JARS",
          "description": "Comma seperated list of Jars",
          "required": false,
          "display": true,
          "editable": true,
          "expandable": true,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "Arguments",
          "value": "\"bash\", \"-c\",\"aws sns publish --topic-arn arn:aws:sns:us-east-1:004331324847:AMAZON_EC2 --message 'Example SNS test!'\"",
          "widget": "textfield",
          "title": "Arguments",
          "description": "Comma seperated list of Arguments.",
          "required": true,
          "display": true,
          "editable": true,
          "expandable": true,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "retries",
          "value": "",
          "widget": "textfield",
          "title": "Retries",
          "description": "Retries",
          "required": false,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "retry_delay",
          "value": "",
          "widget": "textfield",
          "title": "Retry Delay",
          "description": "Retry Delay(seconds)",
          "required": false,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "max_retry_delay",
          "value": "",
          "widget": "textfield",
          "title": "Max Retry Delay",
          "description": "Maximum delay interval between retries(seconds)",
          "required": false,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "retry_exponential_backoff",
          "value": "",
          "widget": "array",
          "title": "Retry Exponential Backoff",
          "description": "Allow progressive longer waits between retries by using exponential backoff algorithm on retry delay",
          "optionsArray": [
            "True",
            "False"
          ],
          "required": false,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "aws_conn_id",
          "value": "",
          "widget": "textfield",
          "title": "AWS Connection ID",
          "description": "AWS Connection ID",
          "required": false,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "trigger_rule",
          "value": "all_success",
          "widget": "array",
          "title": "Trigger Rule",
          "description": "Trigger Rule to be used",
          "optionsArray": [
            "all_success",
            "all_failed",
            "all_done",
            "all_skipped",
            "one_failed",
            "one_success",
            "none_failed",
            "none_failed_min_one_success",
            "none_skipped",
            "always"
          ],
          "required": true,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        }
      ]
    }
  ],
  "edges": []
}