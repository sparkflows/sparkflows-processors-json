{
  "name": "UsingSFTP",
  "uuid": "f093d004-a09a-4ba9-96ca-a0f0c2709003",
  "category": "Utilities",
  "description": "",
  "parameters": "",
  "nodes": [
    {
      "id": "1",
      "path": "/11-Util/",
      "name": "SFTP",
      "description": "Secure file transfer protocol",
      "details": "<h2> SFTP Node Configuration Details</h2>\n<br>\nThe SFTP node enables secure file transfers from a specified remote location to a target location.<br>\n<br>\n<ul>\n<li> Task Name: Assign a unique name for the task within the Airflow DAG.</li>\n<li> Connection: Select the SFTP connection to establish a secure transfer.</li>\n<li> SFTP Remote Location: Specify the directory path on the SFTP server where the file is located.</li>\n<li> Target Path: Provide the S3 path or other destination path where the file should be uploaded.</li>\n<li> Action on Failure: Determine the action if the task fails (e.g., CONTINUE, CANCEL_AND_WAIT).</li>\n<li> ClusterId: The unique identifier for the cluster associated with this task. If the preceding node is 'Create EMR JobFlow,' the ClusterId will be automatically set to the newly created cluster ID from the 'Create EMR JobFlow' step, unless specified otherwise. If not, the ClusterId must be provided explicitly.</li>\n</ul>\nUse the Trigger Rule setting to control when this node executes, based on the success, failure, or completion of prior tasks.<br>",
      "examples": "<h2> SFTP Node Configuration Examples</h2>\n<br>\n<h4> Example 1 - Daily Sales Data Transfer</h4>\n<br>\n<ul>\n<li> Task Name: 'TransferDailySalesData'</li>\n<li> Connection: 'salesDataSFTP' (defined in connections)</li>\n<li> SFTP Remote Location: '/data/sales/daily/'</li>\n<li> Target Path: 's3://company-bucket/sales-data/daily/'</li>\n<li> Action on Failure: 'CONTINUE'</li>\n<li> Trigger Rule: 'all_success'</li>\n</ul>\nThis setup transfers daily sales files from the SFTP directory /data/sales/daily/ to the S3 bucket s3://company-bucket/sales-data/daily/. If the transfer fails, the workflow will continue, as specified by the action on failure.<br>\n<br>\n<h4> Example 2 - Weekly Backup to S3 with Conditional Termination</h4>\n<br>\n<ul>\n<li> Task Name: 'WeeklyBackup'</li>\n<li> Connection: 'backupSFTPConnection'</li>\n<li> SFTP Remote Location: '/backups/weekly/'</li>\n<li> Target Path: 's3://company-backups/weekly/'</li>\n<li> Action on Failure: 'TERMINATE_JOB_FLOW'</li>\n<li> Trigger Rule: 'one_failed'</li>\n</ul>\nIn this scenario, the task transfers weekly backups from the SFTP server directory /backups/weekly/ to the specified S3 bucket. If any previous task in the workflow fails, this task will still attempt to execute. If this task fails, it will terminate the job flow to prevent further execution.<br>",
      "type": "Node",
      "nodeClass": "fire.nodes.sftp.NodeSftp",
      "x": "318.778px",
      "y": "254.778px",
      "fields": [
        {
          "name": "Name",
          "value": "PipelineSftpNode",
          "widget": "textfield",
          "title": "Task Name",
          "description": "Unique name of the task in Airflow DAG",
          "required": true,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "ClusterId",
          "value": "j-10N9TVRG81WOU",
          "widget": "textfield",
          "title": "Cluster ID",
          "description": "If Cluster ID is empty, the step tries to pick the cluster ID from previous create EMR node(task)",
          "required": false,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "ActionOnFailure",
          "value": "CONTINUE",
          "widget": "array",
          "title": "Action On Failure",
          "description": "Action to be taken on Failure",
          "optionsArray": [
            "CANCEL_AND_WAIT",
            "CONTINUE",
            "TERMINATE_JOB_FLOW",
            "TERMINATE_CLUSTER"
          ],
          "required": true,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "SparkConf",
          "value": "",
          "widget": "textfield",
          "title": "Spark Conf",
          "description": "Add spark conf values in comma separated as key=value",
          "required": false,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "aws_conn_id",
          "value": "",
          "widget": "textfield",
          "title": "AWS Connection ID",
          "description": "AWS Connection ID",
          "required": false,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "deploy-mode",
          "value": "cluster",
          "widget": "array",
          "title": "Deploy Mode",
          "description": "Whether to deploy your driver on the worker nodes (cluster) or locally as an external client (client)",
          "optionsArray": [
            "cluster",
            "client"
          ],
          "required": true,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "trigger_rule",
          "value": "all_success",
          "widget": "array",
          "title": "Trigger Rule",
          "description": "Trigger Rule to be used",
          "optionsArray": [
            "all_success",
            "all_failed",
            "all_done",
            "all_skipped",
            "one_failed",
            "one_success",
            "none_failed",
            "none_failed_min_one_success",
            "none_skipped",
            "always"
          ],
          "required": true,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "nodeconfiguration",
          "value": "",
          "widget": "tab",
          "title": "NodeConfiguration",
          "required": false,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "sftpConnection",
          "value": "104",
          "widget": "connections",
          "title": "Connection",
          "description": "The SFTP connection to connect",
          "required": true,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "sftpRemoteLocation",
          "value": "/data/COMMON/housing.csv",
          "widget": "textfield",
          "title": "SFTP Remote Location",
          "description": "User directory path (File take from)",
          "required": true,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "targetLocation",
          "value": "s3a://assume-role-bucket/CommonDailyFile/SFTP-Partner-A/",
          "widget": "textfield",
          "title": "Target Path",
          "description": "S3 Path to upload data.",
          "required": false,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        }
      ]
    },
    {
      "id": "2",
      "path": "/09-Documentation/",
      "name": "Sticky Note",
      "description": "Allows capturing Notes",
      "details": "<h2>Sticky Note</h2>\n<br>\nAllows capturing Notes.<br>",
      "examples": "",
      "type": "sticky",
      "nodeClass": "fire.pipelineNodes.doc.NodeStickyNote",
      "x": "158px",
      "y": "40px",
      "fields": [
        {
          "name": "bgColor",
          "value": "blue",
          "widget": "textfield",
          "title": "Bg Color",
          "description": "Background of the Note",
          "required": false,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "width",
          "value": "688.306878px",
          "widget": "textfield",
          "title": "Width",
          "description": "Width of the Note",
          "required": false,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "height",
          "value": "122.306878px",
          "widget": "textfield",
          "title": "Height",
          "description": "Height of the note",
          "required": false,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        },
        {
          "name": "comment",
          "value": "<h3>Pipeline Task</h3><p><strong>Purpose</strong>: Allows secure file transfer from a remote SFTP location to a target destination (e.g., an S3 bucket).</p><p><br></p><h3>Example Configurations</h3><ul><li><strong>Daily Sales Data Transfer</strong>:</li><li class=\"ql-indent-1\">Transfers files daily from a specified SFTP directory to an S3 bucket, continuing workflow even if this task fails.</li><li><strong>Weekly Backup to S3</strong>:</li><li class=\"ql-indent-1\">Executes a weekly backup from SFTP to S3, terminating the job flow if the transfer fails.</li></ul><p><br></p>",
          "widget": "textarea_rich",
          "title": "Comment",
          "description": "Comments for the Pipeline",
          "required": false,
          "display": true,
          "editable": true,
          "expandable": false,
          "disableRefresh": false,
          "keyValue": false
        }
      ]
    }
  ],
  "edges": []
}