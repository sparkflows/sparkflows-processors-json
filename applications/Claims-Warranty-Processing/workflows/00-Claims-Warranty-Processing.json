{
  "name": "00-Claims-Warranty-Processing",
  "uuid": "d898bb01-9649-4f42-9a16-155a3c76ccc6",
  "category": "GENAI",
  "description": "-",
  "parameters": " --var getStarted=true --var destinationPath=/data/GENAI/Claims-Warranty/Upload --var submit1=true --var genAiResponse=<p><br></p>",
  "nodes": [
    {
      "id": "1",
      "name": "DocumentToText",
      "iconImage": "/images/icons/node-icon/PDF.svg",
      "description": "Extract text from Documents",
      "type": "pyspark",
      "nodeClass": "fire.nodes.gai.NodeDocumentToText",
      "x": "107.595px",
      "y": "92.6071px",
      "fields": [
        {
          "name": "storageLevel",
          "value": "DEFAULT",
          "widget": "array",
          "title": "Output Storage Level",
          "description": "Storage Level of the Output Datasets of this Node",
          "optionsArray": [
            "DEFAULT",
            "NONE",
            "DISK_ONLY",
            "DISK_ONLY_2",
            "MEMORY_ONLY",
            "MEMORY_ONLY_2",
            "MEMORY_ONLY_SER",
            "MEMORY_ONLY_SER_2",
            "MEMORY_AND_DISK",
            "MEMORY_AND_DISK_2",
            "MEMORY_AND_DISK_SER",
            "MEMORY_AND_DISK_SER_2",
            "OFF_HEAP"
          ],
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "filePath",
          "value": "${genaiHome}${destinationPath}",
          "widget": "textfield",
          "title": "Directory/File Path",
          "description": "Select a Pdf/Text/Docx File or Directory",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "fileType",
          "value": "pdf",
          "widget": "array",
          "title": "Document Type",
          "description": "Choose a Document Type.If Empty all four types of files will be processed.",
          "optionsArray": [
            "pdf",
            "txt",
            "docx",
            "image"
          ],
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "recursive",
          "value": "false",
          "widget": "array",
          "title": "Recursive",
          "description": "Recursively process the documents in the given Directory",
          "optionsArray": [
            "true",
            "false"
          ],
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "imgPathCols",
          "value": "[]",
          "widget": "variables",
          "title": "Select Image Column",
          "description": "",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "isImage",
          "value": "false",
          "widget": "array",
          "title": "Image Encoding",
          "description": "Adds a column for base64 encoded pages",
          "optionsArray": [
            "true",
            "false"
          ],
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "saveImageDir",
          "value": "",
          "widget": "textfield",
          "title": "Save Images Directory Path",
          "description": "The file path to save the output",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "columns",
          "value": "",
          "widget": "tab",
          "title": "Rename Output Cols",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "fileNameCol",
          "value": "fileName",
          "widget": "textfield",
          "title": "File Name Column",
          "description": "Rename File Name Column. Defaults to fileName",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "contentCol",
          "value": "content",
          "widget": "textfield",
          "title": "Content Column",
          "description": "Rename Content Column. Defaults to content",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "pageNumberCol",
          "value": "pageNumber",
          "widget": "textfield",
          "title": "Page Number Column",
          "description": "Rename Page Number Column. Defaults to pageNumber",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "base64ImageCol",
          "value": "base64ImageCol",
          "widget": "textfield",
          "title": "Base64 Image Column",
          "description": "Rename Image Column. Defaults to base64ImageCol",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        }
      ],
      "engine": "pyspark"
    },
    {
      "id": "2",
      "name": " Multi LLM Query",
      "iconImage": "/images/icons/node-icon/Graph_group_by_column.svg",
      "description": "This node is designed to query multiple large language models (LLMs) from different providers (OpenAI, Bedrock, Gemini) using a vector database (e.g., Pinecone or FAISS) or a DataFrame. It processes user queries and returns responses by querying the selected vector database.",
      "type": "pyspark",
      "nodeClass": "fire.nodes.gai.NodeMultiLLMQuery",
      "x": "258.762px",
      "y": "300.762px",
      "fields": [
        {
          "name": "storageLevel",
          "value": "DEFAULT",
          "widget": "array",
          "title": "Output Storage Level",
          "description": "Storage Level of the Output Datasets of this Node",
          "optionsArray": [
            "DEFAULT",
            "NONE",
            "DISK_ONLY",
            "DISK_ONLY_2",
            "MEMORY_ONLY",
            "MEMORY_ONLY_2",
            "MEMORY_ONLY_SER",
            "MEMORY_ONLY_SER_2",
            "MEMORY_AND_DISK",
            "MEMORY_AND_DISK_2",
            "MEMORY_AND_DISK_SER",
            "MEMORY_AND_DISK_SER_2",
            "OFF_HEAP"
          ],
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "task",
          "value": "other",
          "widget": "key_value_array",
          "title": "Select Option",
          "description": "Specify the task to perform: summary, translation, topic extraction, or other.",
          "optionsMap": {
            "summary": "Generate Summary in bullet points ",
            "translation": "Translate the following content to default language",
            "topic_extraction": "Extract key topics from the following content.",
            "other": ""
          },
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "customPrompt",
          "value": "You are a Diesel-Engine Warranty Support Specialist. You will be provided:\n\n\nâ¢ A folder of Claim Form PDFs, each named <customer_id>_claim_<claim_number>.pdfÂ Â \nâ¢ One Master Data PDF: warranty_master_data.pdfÂ Â \nâ¢ A folder of Communications PDFs, each named <customer_id>_comm_*.pdf (zero or more per customer)\n\n\nFor each Claim Form PDF in the folder, do the following in strict sequence:\n\n\n1. Extract customer_id and claim_number from its filename.Â Â \n2. Look up that customer_id in the Master Data table.\nÂ  Â â If not found, output exactly:\nÂ  Â  Â No such customer_id found in master data.\nÂ  Â â If found:\nÂ  Â  Â â¢ Extract customer_id, company_name, engine_model, warranty_status.Â Â \nÂ  Â  Â â¢ Extract claim_date and brief_issue_description from the Claim Form.Â Â \nÂ  Â  Â â¢ Gather all communications for that customer_id; if none, note âNo communications foundâ in the PROFESSIONAL_RESPONSE.\n\n\n3. Emit **one single line** of HTML that:\nÂ  Â a) Begins with a heading showing customer and claimÂ Â \nÂ  Â b) Renders the data in the prescribed tableÂ Â \nÂ  Â c) Includes your business-elegant responseÂ Â \nÂ  Â d) Ends with a horizontal rule before the next customerÂ Â \n\n\nÂ  Â The exact template (all in one line):\nÂ  Â <h2 style=\"margin:0 0 10px 0;\">Customer: [customer_id] | Claim: [claim_number]</h2><table border=\"1\" cellpadding=\"5\" style=\"border-collapse: collapse; width: 100%;\"><tr style=\"background-color: #f2f2f2;\"><th>Field</th><th>Value</th></tr><tr><td>Customer ID</td><td>[customer_id]</td></tr><tr><td>Company Name</td><td>[company_name]</td></tr><tr><td>Engine Model</td><td>[engine_model]</td></tr><tr><td>Warranty Status</td><td>[warranty_status]</td></tr><tr><td>Claim Date</td><td>[claim_date]</td></tr><tr><td>Issue Summary</td><td>[brief_issue_description]</td></tr></table><p></p><h3 style=\"margin:20px 0 5px 0; color:#3178d6; font-size:18px; font-weight:400;\">Response</h3><p style=\"margin:0 0 20px 0;\">[PROFESSIONAL_RESPONSE]</p><hr style=\"margin:20px 0;\"/>\n\n\n4. In [PROFESSIONAL_RESPONSE] (150â200 words, business-elegant):\nÂ  Â â If communications exist, briefly reference their takeaway.Â Â \nÂ  Â â If warranty_status = Active â outline next steps under warranty.Â Â \nÂ  Â â If warranty_status = Expired â offer out-of-warranty service options.\n\n\n**ABSOLUTE OUTPUT RULES** (apply per customer):\nâ¢ Output **must start** with `<h2` and **end** with `<hr style=\"margin:20px 0;\"/>`.Â Â \nâ¢ No leading/trailing whitespace or newlines.Â Â \nâ¢ No markdown, code fences, JSON, wrapper text like âRow(â¦)â, or escaped entities.Â Â \nâ¢ Final output for each customer **must** match regex: `^<h2[\\s\\S]+<hr\\s*\\/?>$`.Â Â \nâ¢ If customer_id is missing in Master Data, output only that error line, then proceed to the next.",
          "widget": "textareafield",
          "title": "Custom Prompt",
          "description": "Custom prompt to override the default instructions.",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "userQueryCol",
          "value": "",
          "widget": "variable",
          "title": "User Query Column",
          "description": "Column name for user query (default: 'userQuery').",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "contentCol",
          "value": "content",
          "widget": "variable",
          "title": "Content Column",
          "description": "Column name for the text content.",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "language",
          "value": "en",
          "widget": "textfield",
          "title": "Language",
          "description": "Language for translation (default: 'en').",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "llmConnection",
          "value": "openai-api-connection",
          "widget": "object_array",
          "title": "Select Connection",
          "description": "Select Connection",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "temperature",
          "value": "0",
          "widget": "textfield",
          "title": "Temperature",
          "description": "Temperature setting for the model (default: 0).",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "image_col",
          "value": "",
          "widget": "variable",
          "title": "Image Column",
          "description": "Column name for the base 64 image.",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "inputMode",
          "value": "text",
          "widget": "array",
          "title": "Mode Selection",
          "description": "Select the model to use (text, image, text+image).",
          "optionsArray": [
            "text",
            "image",
            "text+image"
          ],
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "System Prompt",
          "value": "",
          "widget": "tab",
          "title": "System Prompt",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "writePrompt",
          "value": "",
          "widget": "textareafield",
          "title": "Write Prompt",
          "description": "Prompt text for writing the output.",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "outputPath",
          "value": "",
          "widget": "textfield",
          "title": "Output Path",
          "description": "Path where the output will be saved.",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "outputFormat",
          "value": "pdf",
          "widget": "array",
          "title": "Output Format",
          "description": "Output format options: text, pdf, docx or html.",
          "optionsArray": [
            "text",
            "pdf",
            "docx",
            "html"
          ],
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "fileNameCol",
          "value": "",
          "widget": "variable",
          "title": "File Name Column",
          "description": "File Name for saving.",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "pageNumberCol",
          "value": "",
          "widget": "variable",
          "title": "Page Number Column",
          "description": "Page Number Column if file is a PDF.",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "translateFileName",
          "value": "false",
          "widget": "array",
          "title": "Translate File Name",
          "description": "Translates file names to be saved from any language to English",
          "optionsArray": [
            "true",
            "false"
          ],
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        }
      ],
      "engine": "pyspark"
    },
    {
      "id": "4",
      "name": "Output Formatter",
      "iconImage": "fa fa-tumblr-square",
      "description": "This node formats output from Columns.",
      "type": "transform",
      "nodeClass": "fire.nodes.graph.NodeOutputFormatter",
      "x": "516.048px",
      "y": "99.0357px",
      "fields": [
        {
          "name": "storageLevel",
          "value": "DEFAULT",
          "widget": "array",
          "title": "Output Storage Level",
          "description": "Storage Level of the Output Datasets of this Node",
          "optionsArray": [
            "DEFAULT",
            "NONE",
            "DISK_ONLY",
            "DISK_ONLY_2",
            "MEMORY_ONLY",
            "MEMORY_ONLY_2",
            "MEMORY_ONLY_SER",
            "MEMORY_ONLY_SER_2",
            "MEMORY_AND_DISK",
            "MEMORY_AND_DISK_2",
            "MEMORY_AND_DISK_SER",
            "MEMORY_AND_DISK_SER_2",
            "OFF_HEAP"
          ],
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "column",
          "value": "response",
          "widget": "variable",
          "title": " Select Column",
          "description": "Select Column to format",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "key",
          "value": "genAiResponse",
          "widget": "textfield",
          "title": "Key",
          "description": "Specify a key Name",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        }
      ],
      "engine": "pyspark"
    },
    {
      "id": "5",
      "name": "Sticky Note",
      "iconImage": "fa fa-file-text",
      "description": "Allows capturing Notes on the Workflow",
      "type": "sticky",
      "nodeClass": "fire.nodes.doc.NodeStickyNote",
      "x": "657px",
      "y": "70px",
      "fields": [
        {
          "name": "storageLevel",
          "value": "DEFAULT",
          "widget": "array",
          "title": "Output Storage Level",
          "description": "Storage Level of the Output Datasets of this Node",
          "optionsArray": [
            "DEFAULT",
            "NONE",
            "DISK_ONLY",
            "DISK_ONLY_2",
            "MEMORY_ONLY",
            "MEMORY_ONLY_2",
            "MEMORY_ONLY_SER",
            "MEMORY_ONLY_SER_2",
            "MEMORY_AND_DISK",
            "MEMORY_AND_DISK_2",
            "MEMORY_AND_DISK_SER",
            "MEMORY_AND_DISK_SER_2",
            "OFF_HEAP"
          ],
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "bgColor",
          "value": "gray",
          "widget": "textfield",
          "title": "Bg Color",
          "description": "Background of note",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "width",
          "value": "491.306878px",
          "widget": "textfield",
          "title": "Width",
          "description": "Width of note",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "height",
          "value": "463.306878px",
          "widget": "textfield",
          "title": "Height",
          "description": "Height of note",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        },
        {
          "name": "comment",
          "value": "<h1><span style=\"color: unset; background-color: unset;\">Warranty Claims AI Assistant</span></h1><p><br></p><h2><span style=\"color: unset; background-color: unset;\">Step 1: Document Extraction Engine</span></h2><p><br></p><h3><span style=\"color: unset; background-color: unset;\">Purpose:  </span></h3><p><span style=\"color: unset; background-color: unset;\">Transforms diverse warranty documentation (claim forms, master data, and communication PDFs) into structured, analysis-ready data.</span></p><p><br></p><h3><span style=\"color: unset; background-color: unset;\">Input:</span></h3><p><span style=\"color: unset; background-color: unset;\">Repository of warranty-related documents including customer claim forms, warranty master data, and customer communications.</span></p><p><br></p><h3><span style=\"color: unset; background-color: unset;\">Output:</span></h3><p><span style=\"color: unset; background-color: unset;\">Structured data tables containing:</span></p><p><span style=\"color: unset; background-color: unset;\">- Customer identifiers and claim numbers</span></p><p><span style=\"color: unset; background-color: unset;\">- Engine specifications and service history</span></p><p><span style=\"color: unset; background-color: unset;\">- Warranty status and coverage details</span></p><p><span style=\"color: unset; background-color: unset;\">- Communication history with timestamps</span></p><p><br></p><h2><span style=\"color: unset; background-color: unset;\">Step 2: Intelligent Warranty Analysis</span></h2><p><br></p><h3><span style=\"color: unset; background-color: unset;\">Purpose:  </span></h3><p><span style=\"color: unset; background-color: unset;\">Evaluates warranty claims against master data and communication history to determine validity and appropriate response paths.</span></p><p><br></p><h3><span style=\"color: unset; background-color: unset;\">What it does:</span></h3><p><span style=\"color: unset; background-color: unset;\">- Cross-references customer claims against warranty databases</span></p><p><span style=\"color: unset; background-color: unset;\">- Verifies warranty status (Active/Expired/Pending)</span></p><p><span style=\"color: unset; background-color: unset;\">- Analyzes claim details against covered components and conditions</span></p><p><span style=\"color: unset; background-color: unset;\">- Reviews communication history for context and prior resolutions</span></p><p><span style=\"color: unset; background-color: unset;\">- Determines appropriate service options based on warranty status</span></p><p><br></p><h3><span style=\"color: unset; background-color: unset;\">Output:  </span></h3><p><span style=\"color: unset; background-color: unset;\">Comprehensive HTML-formatted responses for each customer including:</span></p><p><span style=\"color: unset; background-color: unset;\">- Structured warranty information in tabular format</span></p><p><span style=\"color: unset; background-color: unset;\">- Professional, business-elegant response tailored to warranty status</span></p><p><span style=\"color: unset; background-color: unset;\">- Clear next steps for both in-warranty and out-of-warranty scenarios</span></p><p><span style=\"color: unset; background-color: unset;\">- Consistent formatting for seamless integration with customer communication systems</span></p><p><br></p><p><span style=\"color: unset; background-color: unset;\">This AI-powered workflow transforms complex warranty processing into a streamlined, consistent experience that maintains professional standards while significantly reducing processing time and human error.</span></p>",
          "widget": "textarea_rich",
          "title": "Comment",
          "description": "Comments for the Workflow",
          "required": false,
          "display": true,
          "editable": true,
          "disableRefresh": false,
          "expandable": false,
          "header": "",
          "size": "100%"
        }
      ],
      "engine": "all"
    }
  ],
  "edges": [
    {
      "source": "1",
      "target": "2",
      "id": 1
    },
    {
      "source": "2",
      "target": "4",
      "id": 2
    }
  ],
  "dataSetDetails": [],
  "engine": "pyspark"
}